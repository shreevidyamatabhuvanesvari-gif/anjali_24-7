<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Anjali тАУ Universal Exam Control Panel</title>

<style>
body{margin:0;font-family:system-ui;background:#f5f6fa}
header{background:#8b2d2d;color:#fff;padding:14px;text-align:center;font-size:20px}
#layout{display:flex;height:calc(100vh - 60px)}

#subjects{width:320px;background:#fff;border-right:1px solid #ccc;overflow:auto;padding:10px}
#panel{flex:1;padding:10px;overflow:auto}

.subject{font-weight:bold;color:#8b2d2d;margin-top:8px;cursor:pointer}
.topic{margin-left:14px;padding:6px;border-radius:6px;cursor:pointer}
.topic:hover{background:#eee}
.topic.active{background:#8b2d2d;color:#fff}

textarea,input{width:100%;padding:8px;margin:6px 0;border:1px solid #ccc;border-radius:6px}
button{padding:8px 14px;margin:4px;border:none;border-radius:8px;background:#8b2d2d;color:#fff}
.secondary{background:#555}

.box{border:1px dashed #aaa;padding:10px;margin-top:10px;border-radius:8px;background:#fff}
#view{max-height:300px;overflow:auto}
</style>
</head>

<body>
<header>ЁЯУЪ Anjali тАУ Universal Exam Control Panel</header>

<div id="layout">
<div id="subjects"></div>

<div id="panel">
<h3 id="path">рдХреЛрдИ рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ</h3>

<div class="box">
<b>ЁЯУЭ MCQ рдЬреЛрдбрд╝реЗрдВ</b>
<textarea id="q"></textarea>
<input id="a" placeholder="A">
<input id="b" placeholder="B">
<input id="c" placeholder="C">
<input id="d" placeholder="D">
<input id="correct" placeholder="Correct (A/B/C/D)">
<textarea id="exp" placeholder="рд╡реНрдпрд╛рдЦреНрдпрд╛"></textarea>
<button onclick="saveOne()">Save</button>
<button class="secondary" onclick="deleteLast()">Delete Last</button>
</div>

<div class="box">
<b>ЁЯУЪ Bulk MCQ (Q | A | Explanation)</b>
<textarea id="bulk" style="min-height:120px"></textarea>
<button onclick="saveBulk()">Save Bulk</button>
</div>

<div class="box">
<b>ЁЯУД Article тЖТ Exam Engine</b>
<textarea id="article" style="min-height:140px"></textarea>
<button onclick="generateFromArticle()">Generate MCQ</button>
<button class="secondary" onclick="clearArticle()">Clear</button>
</div>

<div class="box">
<button onclick="show()">ЁЯУВ рдкреНрд░рд╢реНрди рджрд┐рдЦреЗрдВ</button>
<button onclick="speak()">ЁЯОЩя╕П рдЕрдВрдЬрд▓реА</button>
</div>

<div id="view" class="box"></div>
</div>
</div>

<script>
/* ================= UNIVERSAL SYLLABUS ================= */
const SYLLABUS={
"UP Police Constable":{
"General Knowledge":{"A. History":[],"B. Geography":[],"C. Polity":[],"D. Economy":[],"E. Science":[],"F. Current Affairs":[]},
"General Hindi":{"A. рд╡рд░реНрдгрдорд╛рд▓рд╛":[],"B. рд╕рдВрдзрд┐":[],"C. рд╕рдорд╛рд╕":[],"D. рдЙрдкрд╕рд░реНрдЧ":[],"E. рдкреНрд░рддреНрдпрдп":[],"F. рдкрд░реНрдпрд╛рдпрд╡рд╛рдЪреА":[]},
"Numerical & Mental Ability":{"A. рд╕рдВрдЦреНрдпрд╛ рдкрджреНрдзрддрд┐":[],"B. рдкреНрд░рддрд┐рд╢рдд":[],"C. рд▓рд╛рдн":[],"D. рдФрд╕рдд":[],"E. рд╕рдордп рд╡ рдХрд╛рд░реНрдп":[]},
"Mental Aptitude / Reasoning":{"A. рд╕рд╛рджреГрд╢реНрдп":[],"B. рд╡рд░реНрдЧреАрдХрд░рдг":[],"C. рд╢реНрд░реЗрдгреА":[],"D. рдХреЛрдбрд┐рдВрдЧ":[],"E. рд░рдХреНрдд рд╕рдВрдмрдВрдз":[]}
}
};

/* ================= DATABASE ================= */
let DB=JSON.parse(localStorage.getItem("anjaliUniversal"))||SYLLABUS;
function saveDB(){localStorage.setItem("anjaliUniversal",JSON.stringify(DB));}

/* ================= TREE ================= */
let currentExam=null,currentSubject=null,currentTopic=null;
const tree=document.getElementById("subjects");

for(let exam in DB){
 let h=document.createElement("h3");h.textContent=exam;tree.appendChild(h);
 for(let sub in DB[exam]){
  let s=document.createElement("div");s.className="subject";s.textContent=sub;
  let list=document.createElement("div");
  for(let t in DB[exam][sub]){
   let tp=document.createElement("div");tp.className="topic";tp.textContent=t;
   tp.onclick=()=>{
    document.querySelectorAll(".topic").forEach(x=>x.classList.remove("active"));
    tp.classList.add("active");
    currentExam=exam;currentSubject=sub;currentTopic=t;
    path.innerText=exam+" тЖТ "+sub+" тЖТ "+t;
   };
   list.appendChild(tp);
  }
  s.onclick=()=>list.style.display=list.style.display=="block"?"none":"block";
  tree.appendChild(s);tree.appendChild(list);
 }
}

/* ================= SAVE ================= */
function saveOne(){
 if(!currentTopic)return alert("рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ");
 DB[currentExam][currentSubject][currentTopic].push({q:q.value,a:a.value,b:b.value,c:c.value,d:d.value,correct:correct.value,exp:exp.value});
 saveDB(); show();
}

function saveBulk(){
 if(!currentTopic)return alert("рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ");
 bulk.value.split("\n").forEach(l=>{
  let p=l.split("|");
  if(p.length>=3){
   DB[currentExam][currentSubject][currentTopic].push({q:p[0],a:p[1],b:"",c:"",d:"",correct:"A",exp:p[2]});
  }
 });
 saveDB(); show();
}

/* ================= VIEW ================= */
function show(){
 let arr=DB[currentExam][currentSubject][currentTopic];
 view.innerHTML=arr.map((q,i)=>`${i+1}. ${q.q}<br>A)${q.a}<br>B)${q.b}<br>C)${q.c}<br>D)${q.d}<br>тЬФ ${q.correct}<br>ЁЯУЭ ${q.exp}<hr>`).join("");
}

/* ================= DELETE ================= */
function deleteLast(){
 DB[currentExam][currentSubject][currentTopic].pop();
 saveDB(); show();
}

/* ================= ARTICLE ENGINE ================= */
function generateFromArticle(){
 if(!currentTopic)return alert("рд╡рд┐рд╖рдп рдЪреБрдиреЗрдВ");
 let text=article.value; if(text.length<80)return alert("рд▓реЗрдЦ рдЫреЛрдЯрд╛ рд╣реИ");
 let facts=[];
 if(text.includes("рдХреГрд╖рд┐")&&text.includes("рдЙрджреНрдпреЛрдЧ")&&text.includes("рд╕реЗрд╡рд╛"))facts.push({q:"рднрд╛рд░рддреАрдп рдЕрд░реНрдерд╡реНрдпрд╡рд╕реНрдерд╛ рдХрд┐рди рдХреНрд╖реЗрддреНрд░реЛрдВ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ?",ans:"рдХреГрд╖рд┐, рдЙрджреНрдпреЛрдЧ рдФрд░ рд╕реЗрд╡рд╛"});
 if(text.includes("рд░рд┐рдЬрд╝рд░реНрд╡ рдмреИрдВрдХ"))facts.push({q:"рднрд╛рд░рдд рдХреА рдореМрджреНрд░рд┐рдХ рдиреАрддрд┐ рдХреМрди рдЪрд▓рд╛рддрд╛ рд╣реИ?",ans:"рднрд╛рд░рддреАрдп рд░рд┐рдЬрд╝рд░реНрд╡ рдмреИрдВрдХ"});
 if(text.includes("1991"))facts.push({q:"рдЙрджрд╛рд░реАрдХрд░рдг рдХрдм рд╣реБрдЖ?",ans:"1991"});
 facts.forEach(f=>{
  let opts=[f.ans,"рдХреЛрдИ рдирд╣реАрдВ","рд▓реЛрд╣рд╛ рдЖрдзрд╛рд░рд┐рдд","рд╢рд┐рдХрд╛рд░ рдкрд░"];
  opts.sort(()=>Math.random()-0.5);
  DB[currentExam][currentSubject][currentTopic].push({q:f.q,a:opts[0],b:opts[1],c:opts[2],d:opts[3],correct:["A","B","C","D"][opts.indexOf(f.ans)],exp:f.ans});
 });
 saveDB(); show(); alert("MCQ рдмрдиреЗ");
}
function clearArticle(){article.value="";}

/* ================= VOICE ================= */
function speak(){
 let arr=DB[currentExam][currentSubject][currentTopic];let i=0;
 function go(){ if(i>=arr.length)return;
  let u=new SpeechSynthesisUtterance(arr[i].q+" рдЙрддреНрддрд░ "+arr[i].a);u.lang="hi-IN";speechSynthesis.speak(u);
  i++;u.onend=()=>setTimeout(go,700);
 } go();
}
</script>
</body>
  </html>
